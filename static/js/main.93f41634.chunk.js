(this.webpackJsonpfoodie=this.webpackJsonpfoodie||[]).push([[0],{10:function(e,t,n){e.exports={topnav:"Navigation_topnav__ZCkvd",topnav_hidden:"Navigation_topnav_hidden__2RKXb Navigation_topnav__ZCkvd",menuToggle:"Navigation_menuToggle__3If__",menuToggle_active:"Navigation_menuToggle_active__ztyzY Navigation_menuToggle__3If__",currentPage:"Navigation_currentPage__2tX-E",hamburger:"Navigation_hamburger__2Wmk2",line:"Navigation_line__2lTL6",navMenu:"Navigation_navMenu__1_q_F",navMenu_active:"Navigation_navMenu_active__20FoP Navigation_navMenu__1_q_F",navLink:"Navigation_navLink__VWl9e",navLink_active:"Navigation_navLink_active__699WP Navigation_navLink__VWl9e",logoutLink:"Navigation_logoutLink__2IrYY",actions:"Navigation_actions__3B9Vv",actions_hidden:"Navigation_actions_hidden__2yXp_ Navigation_actions__3B9Vv",actionIcon:"Navigation_actionIcon__j17Kf",actionIcon_active:"Navigation_actionIcon_active__1k1es Navigation_actionIcon__j17Kf"}},15:function(e,t,n){e.exports={actionsContainer:"Layout_actionsContainer__3WHtk","scale-in-actions":"Layout_scale-in-actions__39CBZ",actionsHeader:"Layout_actionsHeader__1o3Vc",headerContent:"Layout_headerContent__2wZ58",row:"Layout_row__2GTkH",inlineBtn:"Layout_inlineBtn__26gd5",inlineIcon:"Layout_inlineIcon__3mLjc",inlineIcon_active:"Layout_inlineIcon_active__3Pkwa Layout_inlineIcon__3mLjc",inlineIcon_error:"Layout_inlineIcon_error__UZyrC Layout_inlineIcon__3mLjc",notification:"Layout_notification__1Lozc",notificationIcon:"Layout_notificationIcon__1zABr",notificationError:"Layout_notificationError__1VB5r Layout_notification__1Lozc"}},24:function(e,t,n){e.exports={login:"Login_login__3IMrH",header:"Login_header___CMfF","fade-in":"Login_fade-in__19auu",title:"Login_title__2UrVx",content:"Login_content__2iFJK","scale-in":"Login_scale-in__11_pu",anonymousBtn:"Login_anonymousBtn__2GWKw",label:"Login_label__1Fzsi",footer:"Login_footer__28LBW","heighten-in":"Login_heighten-in__U3I7p",socialIcons:"Login_socialIcons__1ERG5"}},26:function(e,t,n){e.exports={textInput:"Inputs_textInput__2PtjA",colorPicker:"Inputs_colorPicker__2NE5M",colorItem:"Inputs_colorItem__2_7_r",colorItem_active:"Inputs_colorItem_active__2NkdZ Inputs_colorItem__2_7_r",focus:"Inputs_focus__EnM_1"}},51:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(36),i=n.n(a),o=(n(51),n(30)),s=n(12),u=n(13),l=(n(52),{apiKey:"AIzaSyC2GQP50OlRLXwQTyhRlhSiTmLDO3jeND4",authDomain:"jalins-matlista.firebaseapp.com",databaseURL:"https://jalins-matlista-default-rtdb.europe-west1.firebasedatabase.app",projectId:"jalins-matlista",storageBucket:"jalins-matlista.appspot.com",messagingSenderId:"955087550048",appId:"1:955087550048:web:59ba85bf28d19f71857505"}),j=n(4),d=(n(33),"IDLE"),b="FETCH_START",f="FETCH_COMPLETE",_="FETCH_FAILED",O="ADD_START",p="ADD_COMPLETE",v="ADD_FAILED",h="DELETE_START",g="DELETE_COMPLETE",m="DELETE_FAILED";function x(e){var t=Object(j.c)((function(e){return e.user})).userId,n=Object(j.b)(),c=r.a.useRef(null),a=function(){c.current&&c.current(),c.current=null};return{listen:function(r,i,o,s){if(t&&e&&!c.current){var l=u.a.firestore().collection("users").doc(t).collection(e);o&&o.forEach((function(e){return l=l.orderBy(e[0],e[1])})),s&&(l=l.where(s[0],s[1],s[2])),n({type:i.SET,payload:[]}),n({type:i.SET_STATUS,payload:b}),console.log("Listening to",e),c.current=l.withConverter(r).onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type?n({type:i.ADD,payload:e.doc.data()}):"modified"===e.type?n({type:i.UPDATE,payload:e.doc.data()}):"removed"===e.type&&n({type:i.DELETE,payload:e.doc.id})})),n({type:i.SET_STATUS,payload:f})}),(function(e){n({type:i.SET_STATUS,payload:_}),console.error(e),a()}))}},cancel:a,isActive:c.current}}var E={SET:"SET_CATEGORIES",ADD:"ADD_CATEGORY",UPDATE:"UPDATE_CATEGORY",DELETE:"DELETE_CATEGORY",SET_STATUS:"SET_CATEGORIES_STATUS"},S={SET:"SET_COLORS",ADD:"ADD_COLOR",UPDATE:"UPDATE_COLOR",SET_STATUS:"SET_COLORS_STATUS"},T={SET:"SET_PRODUCTS",ADD:"ADD_PRODUCT",DELETE:"DELETE_PRODUCT",SET_STATUS:"SET_PRODUCTS_STATUS"},y={SET:"SET_GROCERIES",ADD:"ADD_GROCERY",DELETE:"DELETE_GROCERY",SET_STATUS:"SET_GROCERIES_STATUS"},I=n(27),A=function e(t,n,c,r,a){Object(I.a)(this,e),this.id=t,this.name=n,this.description="Antal produkter: "+c,this.colorId=r,this.colorHex=a},C={toFirestore:function(e){return{name:e.name,productCount:e.productCount,color:{id:e.colorId,hex:e.colorHex}}},fromFirestore:function(e){var t=e.id,n=e.data();return new A(t,n.name,n.productCount,n.color.id,n.color.hex)}},L=function e(t,n,c,r,a,i){Object(I.a)(this,e),this.id=t,this.name=n,this.categoryId=c,this.description=r,this.colorId=a,this.colorHex=i},k={toFirestore:function(e){},fromFirestore:function(e){var t=e.id,n=e.data();return new L(t,n.name,n.category.id,n.category.name,n.category.color.id,n.category.color.hex)}},N=function e(t,n,c,r,a){Object(I.a)(this,e),this.id=t,this.description=n,this.productId=c,this.name=r,this.colorHex=a},w={toFirestore:function(e){},fromFirestore:function(e){var t=e.id,n=e.data();return new N(t,n.description,n.product.id,n.product.name,n.product.category.color.hex)}},D=function e(t,n,c){Object(I.a)(this,e),this.id=t,this.hex=n,this.available=c},R={toFirestore:function(e){return{id:e.id,hex:e.hex}},fromFirestore:function(e){var t=e.id,n=e.data();return new D(t,n.hex,n.available)}};var U=function(e){return{type:"SET_MENU_ACTIVE",payload:e}},F=function(e){return{type:"SET_FORM_ACTIVE",payload:e}},P=function(e){return{type:"SET_SEARCH_ACTIVE",payload:e}},M=function(e){return{type:"SET_ACTIONS_HEIGHT",payload:e}},G=function(e){return{type:"SET_NOTIFICATION",payload:e}},H=n(11),B=n(18),V=n.n(B),z=n(10),Y=n.n(z),K=n(1);function W(e){var t=e.icon,n=e.isActive,r=e.onClick;return Object(K.jsx)(K.Fragment,{children:Object(c.createElement)(t,{className:n?Y.a.actionIcon_active:Y.a.actionIcon,onClick:r})})}W.propTypes={onClick:V.a.func.isRequired,isActive:V.a.bool.isRequired,icon:V.a.func.isRequired};var X=W;var q=function(e){var t=e.isActive,n=e.currentPage,c=e.onClick;return Object(K.jsxs)("div",{className:t?Y.a.menuToggle_active:Y.a.menuToggle,onClick:c,children:[Object(K.jsxs)("div",{className:Y.a.hamburger,children:[Object(K.jsx)("div",{className:Y.a.line}),Object(K.jsx)("div",{className:Y.a.line}),Object(K.jsx)("div",{className:Y.a.line})]}),Object(K.jsx)("div",{className:Y.a.currentPage,children:n})]})};function Z(e){var t=e.items,n=e.isActive,c=e.currentLocation,r=e.signOut,a=function(){return Object(K.jsx)("li",{className:Y.a.logoutLink,onClick:r,children:"Logga ut"})},i=Object.keys(t).map((function(e){return Object(K.jsx)("li",{className:c===e?Y.a.navLink_active:Y.a.navLink,children:Object(K.jsx)(o.b,{to:e,children:t[e]})},e)}));return Object(K.jsxs)("ul",{className:n?Y.a.navMenu_active:Y.a.navMenu,children:[i,Object(K.jsx)(a,{})]})}var J=n(6),Q=n(16),$=n.n(Q),ee=n(25),te=function(e){return{type:"SET_USER_ID",payload:e}},ne=function(e){return{type:"SET_USER_STATUS",payload:e}},ce=function(e){return{type:"SET_CATEGORIES_STATUS",payload:e}},re=function(e){return{type:"SET_PRODUCTS_STATUS",payload:e}},ae=function(e){return{type:"SET_GROCERIES_STATUS",payload:e}},ie={"/groceries":"Ink\xf6pslista","/products":"Produkter","/categories":"Kategorier"};function oe(){var e=Object(j.c)((function(e){return e.ui})),t=e.menuActive,n=e.searchActive,r=e.formActive,a=Object(j.c)((function(e){return e.user})).userId,i=Object(j.b)(),o=Object(H.g)(),s=Object(H.f)();Object(c.useLayoutEffect)((function(){i(P(!1)),i(F(!1)),setTimeout((function(){i(U(!1))}),300)}),[o,i]),Object(c.useEffect)((function(){a||"/"===o.pathname||s.push("/")}),[a,o.pathname,s]);return Object(K.jsxs)(K.Fragment,{children:[Object(K.jsxs)("div",{className:"/"===o.pathname?Y.a.topnav_hidden:Y.a.topnav,children:[Object(K.jsx)(q,{isActive:t,onClick:function(){return i(U(!t))},currentPage:ie[o.pathname]}),Object(K.jsxs)("div",{className:t?Y.a.actions_hidden:Y.a.actions,children:[Object(K.jsx)(X,{icon:J.k,onClick:function(){return i(P(!n))},isActive:n}),Object(K.jsx)(X,{icon:J.j,onClick:function(){return i(F(!r))},isActive:r})]})]}),Object(K.jsx)(Z,{items:ie,isActive:t,currentLocation:o.pathname,signOut:function(){return i(te(""))}})]})}var se=n(3),ue=n(15),le=n.n(ue);function je(e){var t=e.children,n=(e.height,Object(j.c)((function(e){return e.ui})).actionsHeight);return Object(K.jsx)("div",{className:le.a.actionsContainer,style:{minHeight:"".concat(n,"rem")},children:t})}function de(e,t){var n=Object(j.c)((function(e){return e.ui})),r=n.searchActive,a=n.formActive,i=Object(j.b)();return Object(c.useEffect)((function(){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i(M(e))};n(r?e:a?t:0)}),[r,a,t,e,i]),{searchActive:r,formActive:a}}function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=Object(c.useState)(e),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(c.useState)(""),j=Object(s.a)(l,2),d=j[0],b=j[1],f=function(e){var t=_(e);return b(t),u(e),t},_=function(e){return t&&e.length<t?"F\xe4ltet m\xe5ste inneh\xe5lla minst ".concat(t," tecken"):n&&e.length>n?"F\xe4ltet f\xe5r inte inneh\xe5lla mer \xe4n ".concat(n," tecken"):r&&!r.test(e)?"F\xe4ltet inneh\xe5ller felaktiga uppgifter":""},O=function(){u(""),b("")};return{value:o,error:d,onChange:f,validate:_,reset:O}}function fe(e){var t=Object(c.useState)(e),n=Object(s.a)(t,2),r=n[0],a=n[1],i=be();return Object(c.useEffect)((function(){a(i.value?e.filter((function(e){return e.name.toUpperCase().includes(i.value.toUpperCase())})):e)}),[e,i.value]),{results:r,input:i}}var _e=n(26),Oe=n.n(_e);function pe(e){var t=e.placeholder,n=e.onChange,c=e.value;return Object(K.jsx)("input",{type:"text",placeholder:t,onChange:function(e){return n(e.target.value)},value:c,className:Oe.a.textInput})}function ve(e){var t=e.children;return Object(K.jsx)("div",{className:le.a.row,children:t})}function he(e){var t=e.icon,n=e.isActive,r=e.hasError;return Object(K.jsx)(K.Fragment,{children:Object(c.createElement)(t,{className:r?le.a.inlineIcon_error:n?le.a.inlineIcon_active:le.a.inlineIcon})})}function ge(e){return Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.k,isActive:!!e.value}),Object(K.jsx)(pe,Object(se.a)({},e))]})}he.propTypes={icon:V.a.func.isRequired,isActive:V.a.bool,hasError:V.a.bool},ge.defaultProps={placeholder:"S\xf6k.."};var me=n(9),xe=n.n(me),Ee=0,Se=1,Te=2;function ye(e,t){return Object(se.a)(Object(se.a)({},e),t)}var Ie={direction:Ee,trigger:Ee,swipeStart:[0,0],isSwiping:!1};function Ae(e){var t=e.item,n=e.onLeftSwipe,r=e.onRightSwipe,a=e.triggerAt,i=void 0===a?50:a,o=Object(c.useReducer)(ye,Ie),u=Object(s.a)(o,2),l=u[0],j=u[1],d=Object(c.useRef)(null),b=Object(c.useRef)(null),f=Object(c.useRef)(null),_=Object(c.useRef)(300);Object(c.useEffect)((function(){b.current&&(_.current=b.current.offsetWidth/100*i)}),[b,i]),Object(c.useEffect)((function(){f.current&&(l.direction===Se&&n?f.current.className=xe.a.bg_left:l.direction===Te&&r?f.current.className=xe.a.bg_right:f.current.className=xe.a.bg)}),[l.direction,f,r,n]);var O=function(e){if(!l.isSwiping){var t=e.clientX,n=e.clientY;d.current.className=xe.a.content_active,j({direction:Ee,trigger:!1,swipeStart:[t,n],isSwiping:!0})}},p=function(e){if(l.isSwiping){var t=e.clientX,n=e.clientY,c=Object(s.a)(l.swipeStart,2),r=t-c[0],a=n-c[1],i=Math.abs(r),o=Math.abs(a);if(i>10){if(o>i)return void x();j({direction:r<0?Se:Te,trigger:i>_.current}),h(r),g((i/_.current).toFixed(2))}}},v=function(){l.isSwiping&&(l.trigger&&(l.direction===Se&&n?(m(),setTimeout((function(){n()}),600)):l.direction),x())},h=function(e){d.current&&(d.current.style.transform="translateX(".concat(e,"px)"))},g=function(e){f.current&&(f.current.style.opacity=e)},m=function(){b.current&&(b.current.className=xe.a.listItem_remove)},x=function(){d.current&&(d.current.className=xe.a.content_reset,j({isSwiping:!1}),h(0),setTimeout((function(){d.current&&(d.current.className=xe.a.content,j(Ie))}),300))},E={onTouchStart:function(e){return O(e.changedTouches[0])},onTouchMove:function(e){return p(e.changedTouches[0])},onTouchEnd:function(){return v()},onTouchCancel:function(){return x()},onMouseDownCapture:function(e){return O(e)},onMouseMove:function(e){return p(e)},onMouseUp:function(){return v()},onMouseLeave:function(){return x()}};return Object(K.jsxs)("div",Object(se.a)(Object(se.a)({className:xe.a.listItem,ref:b},E),{},{children:[Object(K.jsxs)("div",{ref:f,className:xe.a.bg,children:[l.direction===Se&&n&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsxs)("p",{className:xe.a.bgText,children:['Ta bort "',t.name,'"?']}),Object(K.jsx)(J.n,{className:l.trigger?xe.a.bgIcon_wobble:xe.a.bgIcon})]}),l.direction===Te&&r&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsx)(J.a,{className:l.trigger?xe.a.bgIcon_wobble:xe.a.bgIcon}),Object(K.jsxs)("p",{className:xe.a.bgText,children:['Bekr\xe4fta "',t.name,'"?']})]})]}),Object(K.jsxs)("div",Object(se.a)(Object(se.a)({ref:d,className:xe.a.content},E),{},{children:[Object(K.jsxs)("div",{className:xe.a.contentText,children:[Object(K.jsx)("h3",{className:xe.a.name,children:t.name}),Object(K.jsx)("p",{className:xe.a.description,children:t.description})]}),Object(K.jsx)("div",{className:xe.a.categoryColor,style:{background:t.colorHex}})]}))]}))}function Ce(e){var t=e.children;return t.length?Object(K.jsx)("ul",{className:xe.a.list,children:t}):Object(K.jsx)("div",{className:xe.a.placeholder,children:"Inga resultat.."})}function Le(e){var t=e.onClick,n=e.icon,r=e.type,a=void 0===r?"submit":r,i=e.disabled,o=void 0!==i&&i;return Object(K.jsx)("button",{type:a,disabled:o,className:le.a.inlineBtn,onClick:t,children:Object(c.createElement)(n)})}function ke(e){var t=e.children;return Object(K.jsx)("div",{className:Oe.a.colorPicker,children:t})}function Ne(e){var t=e.isActive,n=(e.id,e.hex),c=e.onClick;return Object(K.jsx)("div",{className:t?Oe.a.colorItem_active:Oe.a.colorItem,onClick:function(e){e.target.scrollIntoView({behaviour:"smooth",inline:"center",block:"center"}),c()},style:{background:n}})}function we(e){var t=e.callback,n=e.initialCategoryName,r=void 0===n?"":n,a=Object(j.c)((function(e){return e.categories})),i=a.categoriesStatus,o=a.categories,l=Object(j.c)((function(e){return e.colors})).colors,b=Object(j.c)((function(e){return e.user})).userId,f=Object(j.b)(),_=be(r,1),h=Object(c.useState)(""),g=Object(s.a)(h,2),m=g[0],x=g[1],E=Object(c.useState)(!1),S=Object(s.a)(E,2),T=S[0],y=S[1],I=Object(c.useState)([]),A=Object(s.a)(I,2),L=A[0],k=A[1];Object(c.useEffect)((function(){k(l.filter((function(e){return e.available})))}),[l]),Object(c.useEffect)((function(){var e=function(){f(ce(d))};i===p?(t&&t(),_.reset(),y(!1),x(""),e()):i===v&&(f(G("Det gick inte att l\xe4gga till kategorin")),e())}),[i,_,t,f]);var N=i===O;return Object(K.jsxs)(c.Fragment,{children:[Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.m,isActive:!!_.value,hasError:!!_.error}),Object(K.jsx)(pe,Object(se.a)(Object(se.a)({},_),{},{placeholder:"Vad heter kategorin?"})),Object(K.jsx)(Le,{onClick:function(){if(!_.onChange(_.value))if(m){var e=L.find((function(e){return e.id===m})),t=o.find((function(e){return e.name.toUpperCase()===_.value.toUpperCase()}));if(e)if(t)f(G("Kategorin finns redan"));else{var n={name:_.value,productCount:0,colorId:e.id,colorHex:e.hex};f(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){var r,a,i,o;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=u.a.firestore().batch(),a=u.a.firestore().collection("users").doc(e),i=a.collection("categories").withConverter(C).doc(),r.set(i,t),o=a.collection("colors").doc(t.colorId),r.update(o,{available:!1}),c(ce(O)),r.commit().then((function(){return c(ce(p))})).catch((function(e){c(ce(v)),console.error(e)}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(b,n))}else f(G("F\xe4rgen \xe4r inte tillg\xe4nglig"))}else y(!0)},icon:J.i,disabled:N})]}),Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{hasError:T,icon:J.h}),Object(K.jsx)(ke,{children:L.map((function(e){return Object(K.jsx)(Ne,{id:e.id,hex:e.hex,onClick:function(){return x(e.id)},isActive:e.id===m},e.id)}))})]})]})}function De(){var e=Object(j.c)((function(e){return e.categories})),t=e.categories,n=e.categoriesStatus,c=Object(j.c)((function(e){return e.user})).userId,a=Object(j.b)(),i=de(7,11),o=i.searchActive,s=i.formActive,l=fe(t);return r.a.useEffect((function(){n===m&&a(G("Det gick inte att ta bort kategorin"))}),[n,a]),Object(K.jsxs)("main",{children:[Object(K.jsxs)(je,{children:[o&&Object(K.jsx)(ge,Object(se.a)(Object(se.a)({},l.input),{},{placeholder:"S\xf6k bland kategorier.."})),s&&Object(K.jsx)(we,{})]}),Object(K.jsx)(Ce,{children:l.results.map((function(e,t){return Object(K.jsx)(Ae,{item:e,onLeftSwipe:function(){return a(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){var r,a,i,o;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&e){n.next=2;break}return n.abrupt("return");case 2:r=u.a.firestore().batch(),a=u.a.firestore().collection("users").doc(e),i=a.collection("categories").doc(t.id),r.delete(i),o=a.collection("colors").doc(t.colorId),r.update(o,{available:!0}),c(ce(h)),r.commit().then((function(){return c(ce(g))})).catch((function(e){c(ce(m)),console.error(e)}));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(c,e))}},e.id)}))})]})}function Re(){var e=Object(j.c)((function(e){return e.ui})).notificationMessage,t=Object(c.useRef)(null);return Object(c.useEffect)((function(){e&&t.current&&(t.current.style.display="flex",t.current.className=le.a.notificationError,setTimeout((function(){t.current.className=le.a.notification}),3e3),setTimeout((function(){t.current.style.display="none"}),3350))}),[e,t]),Object(K.jsxs)("div",{className:le.a.notification,ref:t,children:[Object(K.jsx)(J.e,{size:"24",className:le.a.notificationIcon}),e]})}function Ue(e){var t=e.placeholder,n=e.onChange,r=e.value,a=e.options;return Object(K.jsxs)(c.Fragment,{children:[Object(K.jsx)("input",{type:"text",placeholder:t,onChange:function(e){return n(e.target.value)},value:r,className:Oe.a.textInput,list:"suggestions"}),Object(K.jsx)("datalist",{id:"suggestions",children:a.map((function(e){return Object(K.jsx)("option",{value:e},e)}))})]})}function Fe(e){var t=e.onBack,n=e.content;return Object(K.jsxs)("div",{className:le.a.actionsHeader,children:[Object(K.jsx)(Le,{type:"button",icon:J.b,onClick:function(){return t&&t()}}),Object(K.jsx)("div",{className:le.a.headerContent,children:n})]})}function Pe(e){e.callback;var t=e.initialProductName,n=void 0===t?"":t,r=Object(j.c)((function(e){return e.products})),a=r.products,i=r.productsStatus,o=Object(j.c)((function(e){return e.categories})).categories,l=Object(j.c)((function(e){return e.user})).userId,b=Object(j.b)(),f=Object(c.useState)(0),_=Object(s.a)(f,2),h=_[0],g=_[1],m=be(n,1),x=be("",1);Object(c.useEffect)((function(){var e=function(){b(re(d))};i===v?(b(G("Det gick inte att l\xe4gga till produkten")),e()):i===p&&(m.reset(),x.reset(),e())}),[i,m,x,b]),Object(c.useEffect)((function(){0===h?b(M(11)):1===h&&b(M(15))}),[h,b]);var E=i===O;return Object(K.jsxs)(c.Fragment,{children:[0===h&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.l,isActive:!!m.value}),Object(K.jsx)(pe,Object(se.a)(Object(se.a)({},m),{},{placeholder:"Vad heter produkten?"})),Object(K.jsx)(Le,{icon:J.i,onClick:function(){var e=m.onChange(m.value),t=x.onChange(x.value);if(!e&&!t){var n=o.find((function(e){return e.name.toUpperCase()===x.value.toUpperCase()})),c=a.find((function(e){return e.name.toUpperCase()===m.value.toUpperCase()}));if(n)if(c)b(G("Produkten finns redan"));else{var r={name:m.value,category:{id:n.id,name:n.name,color:{id:n.colorId,hex:n.colorHex}}};b(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c(re(O)),u.a.firestore().collection("users").doc(e).collection("products").add(t).then((function(){c(re(p))})).catch((function(e){console.error(e),c(re(v))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(l,r))}else g(1)}},disabled:E})]}),Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.m,isActive:!!x.value}),Object(K.jsx)(Ue,Object(se.a)(Object(se.a)({},x),{},{placeholder:"V\xe4lj kategori..",options:o.map((function(e){return e.name}))}))]})]}),1===h&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsx)(Fe,{content:Object(K.jsxs)("p",{children:["L\xe4gg till ",Object(K.jsx)("b",{children:x.value})]}),onBack:function(){return g(0)}}),Object(K.jsx)(we,{initialCategoryName:x.value,callback:function(){return g(0)}})]})]})}function Me(){var e=Object(j.c)((function(e){return e.groceries})),t=e.groceries,n=e.groceriesStatus,r=Object(j.c)((function(e){return e.products})).products,a=Object(j.c)((function(e){return e.user})).userId,i=Object(j.b)(),o=be("",1),l=be(),b=Object(c.useState)(0),h=Object(s.a)(b,2),g=h[0],m=h[1];Object(c.useEffect)((function(){0===g?i(M(11)):1===g&&i(M(15))}),[g,i]),Object(c.useEffect)((function(){var e=function(){return i(ce(d))};n===f?(o.reset(),l.reset(),e()):n===_&&(i(G("Det gick inte att l\xe4gga till varan i ink\xf6pslistan")),e())}),[n,o,l,i]);return Object(K.jsxs)(c.Fragment,{children:[0===g&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.l,isActive:!!o.value,hasError:!!o.error}),Object(K.jsx)(Ue,Object(se.a)(Object(se.a)({},o),{},{placeholder:"V\xe4lj produkt..",options:r.map((function(e){return e.name}))})),Object(K.jsx)(Le,{disabled:n===O,onClick:function(){if(!o.onChange(o.value)){var e=r.find((function(e){return e.name.toUpperCase()===o.value.toUpperCase()})),n=t.find((function(e){return e.name.toUpperCase()===o.value.toUpperCase()}));if(e)if(n)i(G("Varan finns redan i ink\xf6pslistan"));else{var c={description:l.value,product:{id:e.id,name:e.name,category:{id:e.categoryId,color:{id:e.colorId,hex:e.colorHex}}}};i(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c(ae(O)),u.a.firestore().collection("users").doc(e).collection("groceries").add(t).then((function(){c(ae(p))})).catch((function(e){console.error(e),c(ae(v))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(a,c))}else m(1)}},icon:J.i})]}),Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.c,isActive:!!l.value}),Object(K.jsx)(pe,Object(se.a)(Object(se.a)({},l),{},{placeholder:"Kommentar (t.ex glutenfritt..)"}))]})]}),1===g&&Object(K.jsxs)(c.Fragment,{children:[Object(K.jsx)(Fe,{content:Object(K.jsxs)("p",{children:["L\xe4gg till ",Object(K.jsx)("b",{children:o.value})]}),onBack:function(){return m(0)}}),Object(K.jsx)(Pe,{initialProductName:o.value,callback:function(){return m(0)}})]})]})}function Ge(){var e=de(7,10),t=e.searchActive,n=e.formActive,r=e.actionsHeight,a=Object(j.c)((function(e){return e.groceries})),i=a.groceries,o=a.groceriesStatus,s=Object(j.c)((function(e){return e.user})).userId,l=Object(j.b)(),d=fe(i);return Object(c.useEffect)((function(){o===m&&l(G("Det gick inte att ta bort varan"))}),[o,l]),Object(K.jsxs)("main",{children:[Object(K.jsxs)(je,{height:r,children:[t&&Object(K.jsx)(ge,Object(se.a)(Object(se.a)({},d.input),{},{placeholder:"S\xf6k i ink\xf6pslistan.."})),n&&Object(K.jsx)(Me,{})]}),Object(K.jsx)(Ce,{children:d.results.map((function(e){return Object(K.jsx)(Ae,{item:e,onLeftSwipe:function(){return l(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c(ae(h)),u.a.firestore().collection("users").doc(e).collection("groceries").doc(t).delete().then((function(){c(ae(g))})).catch((function(e){c(ae(m))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(s,e.id))}},e.id)}))})]})}function He(e){var t=Object(j.c)((function(e){return e.user})),n=t.userStatus,r=t.userId,a=Object(j.b)(),i=be("",1),o=Object(c.useState)(""),l=Object(s.a)(o,2),O=l[0],p=l[1];Object(c.useEffect)((function(){a(te(""))}),[a]),Object(c.useEffect)((function(){n===f?(r?(p(""),e.push("/groceries")):(p("Anv\xe4ndaren hittades inte"),setTimeout((function(){return p("")}),300)),a(ne(d))):n===_&&a(G("N\xe5got gick fel n\xe4r du skulle loggas in"))}),[n,e,r,a]);var v=function(e){a(function(e){return function(){var t=Object(ee.a)($.a.mark((function t(n){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ne(b)),u.a.firestore().collection("users").where("name","==",e.toLowerCase()).get().then((function(e){var t=e.docs[0];t&&n(te(t.id)),n(ne(f))})).catch((function(e){console.error(e),n(ne(_))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))};return{onLogin:function(e){e.preventDefault(),i.onChange(i.value)||v(i.value)},onAnonymousLogin:function(){v("anonymous")},userName:i,nameError:O}}var Be=n(24),Ve=n.n(Be);function ze(e){var t=He(e.history),n=t.onLogin,c=t.onAnonymousLogin,r=t.userName,a=t.nameError;return Object(K.jsxs)("div",{className:Ve.a.login,children:[Object(K.jsxs)("div",{className:Ve.a.header,children:[Object(K.jsx)("h1",{className:Ve.a.title,children:"Ink\xf6pslistan"}),Object(K.jsx)("p",{className:Ve.a.subTitle,children:"En enkel matapp med ungef\xe4r tv\xe5 anv\xe4ndare"})]}),Object(K.jsxs)("div",{className:Ve.a.content,children:[Object(K.jsxs)("form",{className:Ve.a.loginForm,onSubmit:n,children:[Object(K.jsx)("label",{className:Ve.a.label,children:"Fyll i ditt anv\xe4ndarnamn"}),Object(K.jsxs)(ve,{children:[Object(K.jsx)(he,{icon:J.o,hasError:!!r.error||!!a,isActive:!!r.value}),Object(K.jsx)(pe,Object(se.a)(Object(se.a)({},r),{},{placeholder:"Anv\xe4ndarnamn.."})),Object(K.jsx)(Le,{icon:J.a})]})]}),Object(K.jsx)("label",{className:Ve.a.label,children:"Eller utforska appen"}),Object(K.jsx)("button",{className:Ve.a.anonymousBtn,onClick:c,children:"Forts\xe4tt utan att logga in"})]}),Object(K.jsxs)("div",{className:Ve.a.footer,children:[Object(K.jsx)("small",{children:"by Jan Mysiak"}),Object(K.jsxs)("div",{className:Ve.a.socialIcons,children:[Object(K.jsx)("a",{href:"https://www.linkedin.com/in/jan-mysiak",target:"_blank",rel:"noreferrer",children:Object(K.jsx)(J.g,{size:"24"})}),Object(K.jsx)("a",{href:"https://github.com/jan-mysiak",target:"_blank",rel:"noreferrer",children:Object(K.jsx)(J.f,{size:"24"})}),Object(K.jsx)("a",{href:"mailto:jan.mysiak@hotmail.com",target:"_blank",rel:"noreferrer",children:Object(K.jsx)(J.d,{size:"24"})})]})]})]})}function Ye(){var e=Object(j.c)((function(e){return e.products})).products,t=Object(j.c)((function(e){return e.user})).userId,n=Object(j.b)(),c=de(7,11),r=c.searchActive,a=c.formActive,i=fe(e);return Object(K.jsxs)("main",{children:[Object(K.jsxs)(je,{children:[r&&Object(K.jsx)(ge,Object(se.a)(Object(se.a)({},i.input),{},{placeholder:"S\xf6k bland produkter..."})),a&&Object(K.jsx)(Pe,{})]}),Object(K.jsx)(Ce,{children:i.results.map((function(e,c){return Object(K.jsx)(Ae,{item:e,onLeftSwipe:function(){return n(function(e,t){return function(){var n=Object(ee.a)($.a.mark((function n(c){return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c(re(h)),u.a.firestore().collection("users").doc(e).collection("products").doc(t).delete().then((function(){c(re(g))})).catch((function(e){c(re(m))}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,e.id))}},e.id)}))})]})}function Ke(){return Object(K.jsxs)(H.c,{children:[Object(K.jsx)(H.a,{component:Ge,path:"/groceries"}),Object(K.jsx)(H.a,{component:Ye,path:"/products"}),Object(K.jsx)(H.a,{component:De,path:"/categories"}),Object(K.jsx)(H.a,{component:ze,path:"/"})]})}var We=function(){return function(){var e=Object(j.c)((function(e){return e.user})).userId,t=Object(c.useState)(""),n=Object(s.a)(t,2),r=n[0],a=n[1],i=x("categories"),o=x("products"),d=x("colors"),b=x("groceries");Object(c.useEffect)((function(){var t=function(){d.cancel(),o.cancel(),b.cancel(),i.cancel()};if(u.a.apps.length||u.a.initializeApp(l),u.a.auth().currentUser||u.a.auth().signInAnonymously().then((function(){a("")})).catch((function(e){console.error(e),a(e)})),e)return i.isActive||i.listen(C,E,[["name","desc"]]),d.isActive||d.listen(R,S),o.isActive||o.listen(k,T,[["category.name","desc"],["name","desc"]]),b.isActive||b.listen(w,y,[["product.category.name","desc"],["product.name","desc"]]),function(){return t()};t()}),[e,o,b,i,d])}(),Object(K.jsxs)("div",{className:"app",children:[Object(K.jsxs)(o.a,{basename:"/foodie",children:[Object(K.jsx)(oe,{}),Object(K.jsx)(Ke,{})]}),Object(K.jsx)(Re,{})]})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,63)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},qe=n(31),Ze=n(46),Je={menuActive:!1,formActive:!1,searchActive:!1,actionsHeight:0,notificationMessage:""};var Qe={userId:"",userStatus:d};var $e=n(28),et={categories:[],categoriesStatus:d};var tt={products:[],productsStatus:d};var nt={groceries:[],groceriesStatus:d};var ct={colors:[],colorsStatus:d};var rt=Object(qe.c)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_ACTIVE":return Object(se.a)(Object(se.a)({},e),{},{searchActive:t.payload,formActive:!1});case"SET_FORM_ACTIVE":return Object(se.a)(Object(se.a)({},e),{},{formActive:t.payload,searchActive:!1});case"SET_MENU_ACTIVE":return Object(se.a)(Object(se.a)({},e),{},{menuActive:t.payload});case"SET_ACTIONS_HEIGHT":return Object(se.a)(Object(se.a)({},e),{},{actionsHeight:t.payload});case"SET_NOTIFICATION":return Object(se.a)(Object(se.a)({},e),{},{notificationMessage:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_ID":return Object(se.a)(Object(se.a)({},e),{},{userId:t.payload});case"SET_USER_STATUS":return Object(se.a)(Object(se.a)({},e),{},{userStatus:t.payload});default:return e}},groceries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GROCERIES":return Object(se.a)(Object(se.a)({},e),{},{groceries:t.payload});case"ADD_GROCERY":return Object(se.a)(Object(se.a)({},e),{},{groceries:[t.payload].concat(Object($e.a)(e.groceries))});case"DELETE_GROCERY":return Object(se.a)(Object(se.a)({},e),{},{groceries:e.groceries.filter((function(e){return e.id!==t.payload}))});case"SET_GROCERIES_STATUS":return Object(se.a)(Object(se.a)({},e),{},{groceriesStatus:t.payload});default:return e}},products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRODUCTS":return Object(se.a)(Object(se.a)({},e),{},{products:t.payload});case"ADD_PRODUCT":return Object(se.a)(Object(se.a)({},e),{},{products:[t.payload].concat(Object($e.a)(e.products))});case"DELETE_PRODUCT":return Object(se.a)(Object(se.a)({},e),{},{products:e.products.filter((function(e){return e.id!==t.payload}))});case"SET_PRODUCTS_STATUS":return Object(se.a)(Object(se.a)({},e),{},{productsStatus:t.payload});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORIES":return Object(se.a)(Object(se.a)({},e),{},{categories:t.payload});case"ADD_CATEGORY":return Object(se.a)(Object(se.a)({},e),{},{categories:[t.payload].concat(Object($e.a)(e.categories))});case"UPDATE_CATEGORY":return Object(se.a)(Object(se.a)({},e),{},{categories:e.categories.map((function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e}))});case"DELETE_CATEGORY":return Object(se.a)(Object(se.a)({},e),{},{categories:e.categories.filter((function(e){return e.id!==t.payload}))});case"SET_CATEGORIES_STATUS":return Object(se.a)(Object(se.a)({},e),{},{categoriesStatus:t.payload});default:return e}},colors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLORS":return Object(se.a)(Object(se.a)({},e),{},{colors:t.payload});case"ADD_COLOR":return Object(se.a)(Object(se.a)({},e),{},{colors:[t.payload].concat(Object($e.a)(e.colors))});case"UPDATE_COLOR":return Object(se.a)(Object(se.a)({},e),{},{colors:e.colors.map((function(e){return e.id===t.payload.id?Object.assign({},e,t.payload):e}))});case"SET_COLORS_STATUS":return Object(se.a)(Object(se.a)({},e),{},{colorsStatus:t.payload});default:return e}}}),at=Object(qe.d)(rt,Object(qe.a)(Ze.a));i.a.render(Object(K.jsx)(r.a.StrictMode,{children:Object(K.jsx)(j.a,{store:at,children:Object(K.jsx)(We,{})})}),document.getElementById("root")),Xe()},9:function(e,t,n){e.exports={list:"SwipeableList_list__8qAVY",placeholder:"SwipeableList_placeholder__v1One",listItem:"SwipeableList_listItem__2g1w7",listItem_remove:"SwipeableList_listItem_remove__2JCjT SwipeableList_listItem__2g1w7",content:"SwipeableList_content__3oS2i",content_active:"SwipeableList_content_active__2Ipi7 SwipeableList_content__3oS2i",content_reset:"SwipeableList_content_reset__3jyLl SwipeableList_content__3oS2i",description:"SwipeableList_description__2CLIR",categoryColor:"SwipeableList_categoryColor__L5GzO",bg:"SwipeableList_bg__zNP3x",bg_left:"SwipeableList_bg_left__1tz7s SwipeableList_bg__zNP3x",bg_right:"SwipeableList_bg_right__XMiiP SwipeableList_bg__zNP3x",bgIcon:"SwipeableList_bgIcon__3uWQm",bgText:"SwipeableList_bgText__2lPGz",bgIcon_wobble:"SwipeableList_bgIcon_wobble__1PfyK SwipeableList_bgIcon__3uWQm",wobble:"SwipeableList_wobble__1ho09"}}},[[62,1,2]]]);
//# sourceMappingURL=main.93f41634.chunk.js.map